const Tt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};Tt();function _(){}function St(t){return t()}function xt(){return Object.create(null)}function H(t){t.forEach(St)}function Ct(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Nt(t){return Object.keys(t).length===0}function Ot(t,...e){if(t==null)return _;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Z(t,e,n){t.$$.on_destroy.push(Ot(e,n))}function W(t,e,n){return t.set(n),e}function a(t,e){t.appendChild(e)}function T(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function L(t){return document.createTextNode(t)}function w(){return L(" ")}function ct(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function jt(t){return Array.from(t.childNodes)}function Dt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function At(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,s,e),r}let A;function D(t){A=t}function Mt(){if(!A)throw new Error("Function called outside component initialization");return A}function mt(t){Mt().$$.on_mount.push(t)}function Ht(){const t=Mt();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=At(e,n,{cancelable:s});return r.slice().forEach(l=>{l.call(t,i)}),!i.defaultPrevented}return!0}}const j=[],X=[],U=[],kt=[],zt=Promise.resolve();let at=!1;function Pt(){at||(at=!0,zt.then(Et))}function ut(t){U.push(t)}const ot=new Set;let F=0;function Et(){const t=A;do{for(;F<j.length;){const e=j[F];F++,D(e),Bt(e.$$)}for(D(null),j.length=0,F=0;X.length;)X.pop()();for(let e=0;e<U.length;e+=1){const n=U[e];ot.has(n)||(ot.add(n),n())}U.length=0}while(j.length);for(;kt.length;)kt.pop()();at=!1,ot.clear(),D(t)}function Bt(t){if(t.fragment!==null){t.update(),H(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ut)}}const K=new Set;let qt;function R(t,e){t&&t.i&&(K.delete(t),t.i(e))}function it(t,e,n,s){if(t&&t.o){if(K.has(t))return;K.add(t),qt.c.push(()=>{K.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function lt(t){t&&t.c()}function Y(t,e,n,s){const{fragment:r,on_mount:i,on_destroy:l,after_update:c}=t.$$;r&&r.m(e,n),s||ut(()=>{const u=i.map(St).filter(Ct);l?l.push(...u):H(u),t.$$.on_mount=[]}),c.forEach(ut)}function G(t,e){const n=t.$$;n.fragment!==null&&(H(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ft(t,e){t.$$.dirty[0]===-1&&(j.push(t),Pt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function tt(t,e,n,s,r,i,l,c=[-1]){const u=A;D(t);const o=t.$$={fragment:null,ctx:null,props:i,update:_,not_equal:r,bound:xt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:xt(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};l&&l(o.root);let g=!1;if(o.ctx=n?n(t,e.props||{},(h,$,...f)=>{const m=f.length?f[0]:$;return o.ctx&&r(o.ctx[h],o.ctx[h]=m)&&(!o.skip_bound&&o.bound[h]&&o.bound[h](m),g&&Ft(t,h)),$}):[],o.update(),g=!0,H(o.before_update),o.fragment=s?s(o.ctx):!1,e.target){if(e.hydrate){const h=jt(e.target);o.fragment&&o.fragment.l(h),h.forEach(x)}else o.fragment&&o.fragment.c();e.intro&&R(t.$$.fragment),Y(t,e.target,e.anchor,e.customElement),Et()}D(u)}class et{$destroy(){G(this,1),this.$destroy=_}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!Nt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const It=1e3,dt=60*It,ft=60*dt,pt=24*ft,Ut=t=>100*Math.abs(t-Date.now())/pt,Lt=t=>({days:Math.floor(t/pt),hours:Math.floor(t%pt/ft),minutes:Math.floor(t%ft/dt),seconds:Math.floor(t%dt/It)}),I=[];function nt(t,e=_){let n;const s=new Set;function r(c){if(z(t,c)&&(t=c,n)){const u=!I.length;for(const o of s)o[1](),I.push(o,t);if(u){for(let o=0;o<I.length;o+=2)I[o][0](I[o+1]);I.length=0}}}function i(c){r(c(t))}function l(c,u=_){const o=[c,u];return s.add(o),s.size===1&&(n=e(r)||_),c(t),()=>{s.delete(o),s.size===0&&(n(),n=null)}}return{set:r,update:i,subscribe:l}}let J=nt(localStorage.getItem("tries")||"0");J.subscribe(t=>localStorage.setItem("tries",t));let Q=nt(localStorage.getItem("last_try_time")||"");Q.subscribe(t=>localStorage.setItem("last_try_time",t));let ht=nt(localStorage.getItem("history")||"");ht.subscribe(t=>localStorage.setItem("history",t));let V=nt(localStorage.getItem("theme")||"emerald");V.subscribe(t=>localStorage.setItem("theme",t));function Kt(t){let e,n,s,r,i,l,c,u,o,g,h,$,f,m,k,S,gt,_t,C,P,B,bt,$t,M,E,q,st,yt,N,wt,O,rt,vt;return{c(){e=d("div"),n=d("div"),s=d("div"),r=d("div"),i=d("span"),l=d("span"),c=L(`
                days`),u=w(),o=d("div"),g=d("span"),h=d("span"),$=L(`
                hours`),f=w(),m=d("div"),k=d("span"),S=d("span"),gt=L(`
                min`),_t=w(),C=d("div"),P=d("span"),B=d("span"),bt=L(`
                sec`),$t=w(),M=d("div"),E=d("div"),q=d("span"),st=L(t[5]),yt=w(),N=d("button"),N.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>',wt=w(),O=d("button"),O.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',b(l,"--value",t[1]),p(i,"class","countdown font-mono text-xl"),p(r,"class","w-12"),b(h,"--value",t[2]),p(g,"class","countdown font-mono text-xl"),p(o,"class","w-14"),b(S,"--value",t[3]),p(k,"class","countdown font-mono text-xl"),p(m,"class","w-12"),b(B,"--value",t[4]),p(P,"class","countdown font-mono text-xl"),p(C,"class","w-6"),p(s,"class","flex"),p(n,"class","radial-progress border border-primary text-primary "),b(n,"--value",t[0]),b(n,"--size","220px"),b(n,"--thickness","4px"),p(q,"class","indicator-item indicator-bottom badge"),p(N,"class","btn w-24 btn-warning"),p(E,"class","indicator"),p(O,"class","btn w-24 btn-accent"),p(M,"class","mt-5 flex gap-10"),p(e,"class","container flex flex-col items-center mt-10")},m(y,v){T(y,e,v),a(e,n),a(n,s),a(s,r),a(r,i),a(i,l),a(r,c),a(s,u),a(s,o),a(o,g),a(g,h),a(o,$),a(s,f),a(s,m),a(m,k),a(k,S),a(m,gt),a(s,_t),a(s,C),a(C,P),a(P,B),a(C,bt),a(e,$t),a(e,M),a(M,E),a(E,q),a(q,st),a(E,yt),a(E,N),a(M,wt),a(M,O),rt||(vt=[ct(N,"click",t[6]),ct(O,"click",t[7])],rt=!0)},p(y,[v]){v&2&&b(l,"--value",y[1]),v&4&&b(h,"--value",y[2]),v&8&&b(S,"--value",y[3]),v&16&&b(B,"--value",y[4]),v&1&&b(n,"--value",y[0]),v&32&&Dt(st,y[5])},i:_,o:_,d(y){y&&x(e),rt=!1,H(vt)}}}function Rt(t,e,n){let s;Z(t,J,f=>n(5,s=f));const r=Ht();let i=0,l=0,c=0,u=0,o=0;return[i,l,c,u,o,s,()=>W(J,s=(parseInt(s)+1).toString(),s),()=>{r("progress_reset",s),W(J,s="0",s)},f=>{const m=Lt(Date.now()-f);n(1,l=m.days),n(2,c=m.hours),n(3,u=m.minutes),n(4,o=m.seconds),n(0,i=Ut(f)-100*m.days)}]}class Yt extends et{constructor(e){super(),tt(this,e,Rt,Kt,z,{update_progress:8})}get update_progress(){return this.$$.ctx[8]}}function Gt(t){let e,n,s;return{c(){e=d("h2"),e.textContent="Historical",n=w(),s=d("div"),s.innerHTML=`<table class="table table-compact w-full"><thead><tr><th></th> 
                <th>Start date</th> 
                <th>Duration</th> 
                <th><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></th></tr></thead> 
        <tbody id="daily_report_table"></tbody></table>`,p(e,"class","text-2xl mt-10"),p(s,"class","overflow-x-auto mt-2")},m(r,i){T(r,e,i),T(r,n,i),T(r,s,i)},p:_,i:_,o:_,d(r){r&&x(e),r&&x(n),r&&x(s)}}}function Jt(t,e,n){let s;Z(t,ht,l=>n(1,s=l));const r=l=>{const c=document.querySelector("#daily_report_table"),u=Lt(l.duration);c.innerHTML+=`
        <tr>
            <th>${c.childElementCount+1}</th>
            <td>${l.start_date}</td>
            <td class="font-normal">
                ${u.days}d ${u.hours}h ${u.minutes}m ${u.seconds}s
            </td>
            <td>${l.tries}</td>
        </tr>
        `},i=(l,c)=>{const u=new Date,o=u.getTime()-c,h={start_date:u.toLocaleString("es-ES").replace(",",""),duration:o,tries:l};ht.update($=>`${Object.values(h)};${$}`),r(h)};return mt(()=>{!s.length||s.split(";").map(l=>l.split(",")).sort((l,c)=>parseInt(c[1])-parseInt(l[1])).forEach(l=>{l.length<3||r({start_date:l[0],duration:l[1],tries:l[2]})})}),[i]}class Qt extends et{constructor(e){super(),tt(this,e,Jt,Gt,z,{generate_report:0})}get generate_report(){return this.$$.ctx[0]}}function Vt(t){let e,n,s,r;return{c(){e=d("input"),p(e,"type","checkbox"),p(e,"class","toggle"),e.checked=n=t[0]==="night"},m(i,l){T(i,e,l),s||(r=ct(e,"click",t[1]),s=!0)},p(i,[l]){l&1&&n!==(n=i[0]==="night")&&(e.checked=n)},i:_,o:_,d(i){i&&x(e),s=!1,r()}}}function Wt(t,e,n){let s;Z(t,V,l=>n(0,s=l)),mt(()=>r());const r=()=>document.querySelector("html").setAttribute("data-theme",s);return[s,()=>{s==="emerald"?W(V,s="night",s):W(V,s="emerald",s),r()}]}class Xt extends et{constructor(e){super(),tt(this,e,Wt,Vt,z,{})}}function Zt(t){let e,n,s,r,i,l,c,u,o,g;i=new Xt({});let h={};c=new Yt({props:h}),t[3](c),c.$on("progress_reset",t[2]);let $={};return o=new Qt({props:$}),t[4](o),{c(){e=d("main"),n=d("header"),s=d("div"),s.innerHTML=`<h1 class="text-3xl font-bold"><span class="text-primary">Bad</span> Tracker</h1> 
            <p>Track your <class class="text-primary">bad</class> habits and get a better</p>`,r=w(),lt(i.$$.fragment),l=w(),lt(c.$$.fragment),u=w(),lt(o.$$.fragment),p(n,"class","flex justify-between items-center gap-2"),p(e,"class","container mt-4 p-4 m-auto max-w-4xl")},m(f,m){T(f,e,m),a(e,n),a(n,s),a(n,r),Y(i,n,null),a(e,l),Y(c,e,null),a(e,u),Y(o,e,null),g=!0},p(f,[m]){const k={};c.$set(k);const S={};o.$set(S)},i(f){g||(R(i.$$.fragment,f),R(c.$$.fragment,f),R(o.$$.fragment,f),g=!0)},o(f){it(i.$$.fragment,f),it(c.$$.fragment,f),it(o.$$.fragment,f),g=!1},d(f){f&&x(e),G(i),t[3](null),G(c),t[4](null),G(o)}}}function te(t,e,n){let s;Z(t,Q,o=>n(5,s=o));let r,i;const l=o=>{i.generate_report(o.detail,s),Q.update(()=>Date.now().toString())};mt(()=>{s||Q.update(()=>Date.now().toString()),setInterval(()=>r.update_progress(s),1e3)});function c(o){X[o?"unshift":"push"](()=>{r=o,n(0,r)})}function u(o){X[o?"unshift":"push"](()=>{i=o,n(1,i)})}return[r,i,l,c,u]}class ee extends et{constructor(e){super(),tt(this,e,te,Zt,z,{})}}new ee({target:document.getElementById("app")});
